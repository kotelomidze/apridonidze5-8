
<!DOCTYPE html>
<html lang="ka">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>პარონიმები - სავარჯიშოები</title>
    <!-- სტაბილური ბიბლიოთეკები CDN-დან -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fira+GO:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Fira GO', sans-serif;
            background-color: #f8fafc;
        }
        .fade-in {
            animation: fadeIn 0.4s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.3",
    "react/": "https://esm.sh/react@^19.2.3/"
  }
}
</script>
<link rel="stylesheet" href="/index.css">
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        const PARONYM_THEORY = {
            'აღქმა/აღთქმა': 'აღქმა ნიშნავს გარკვეული ფაქტისა თუ მოვლენის გაცნობიერებას. აღთქმა ნიშნავს „დაპირებას“, „დანაპირებს“.',
            'კამპანია/კომპანია': 'კომპანია არის გაერთიანება ან მეგობართა ჯგუფი. კამპანია არის ორგანიზებული ღონისძიება (მაგ: საარჩევნო).',
            'სწორად/სწორედ': 'სწორად = მართებულად. სწორედ = ზუსტად, ნამდვილად.',
            'პირი/პიროვნება': 'პირი არის ფართო, ზოგადი მნიშვნელობის მქონე სიტყვა (მისი სინონიმებია: ვინმე, მავანი). პიროვნება არის ინდივიდუალური თვისებების მქონე ადამიანი.'
        };

        const RAW_EXERCISES = [
            { id: 1, originalSentence: "ისრაელს აღქმულ ქვეყანას უწოდებენ.", paronym: "აღქმულ", correctParonym: "აღთქმულ", incorrectParonym: "აღქმულ", explanation: "ისრაელი არის „აღთქმული ქვეყანა“.", context: 'აღქმა/აღთქმა' },
            { id: 2, originalSentence: "ამ მისიის შესასრულებლად გაიგზავნა შესანიშნავი პირი.", paronym: "პირი", correctParonym: "პიროვნება", incorrectParonym: "პირი", explanation: "გამორჩეულ ინდივიდზე საუბრისას ვიყენებთ „პიროვნებას“.", context: 'პირი/პიროვნება' },
            { id: 3, originalSentence: "ბევრი უცხოური თუ ადგილობრივი ფირმა და კამპანიაა შექმნილი.", paronym: "კამპანია", correctParonym: "კომპანია", incorrectParonym: "კამპანია", explanation: "ბიზნეს გაერთიანებას „კომპანია“ ეწოდება.", context: 'კამპანია/კომპანია' },
            { id: 4, originalSentence: "არასწორედ დასმულ კითხვაზე ძნელია სწორად უპასუხო.", paronym: "არასწორედ", correctParonym: "არასწორად", incorrectParonym: "არასწორედ", explanation: "„როგორ?“ კითხვაზე პასუხია „სწორად“.", context: 'სწორად/სწორედ' },
            { id: 5, originalSentence: "ასეთ კომპანიაში დროსტარება კარგია.", paronym: "კომპანიაში", correctParonym: "კომპანიაში", incorrectParonym: "კამპანიაში", explanation: "მეგობართა ჯგუფს „კომპანია“ ეწოდება.", context: 'კამპანია/კომპანია' },
            { id: 6, originalSentence: "ბატონმა მსახურს დახმარება აღუთქვა.", paronym: "აღუთქვა", correctParonym: "აღუთქვა", incorrectParonym: "აღიქვა", explanation: "აღთქმა ნიშნავს დაპირებას.", context: 'აღქმა/აღთქმა' },
            { id: 7, originalSentence: "ეს ჩემი ახლანდელი კამპანიონია.", paronym: "კამპანიონი", correctParonym: "კომპანიონი", incorrectParonym: "კამპანიონი", explanation: "პარტნიორი არის „კომპანიონი“.", context: 'კამპანია/კომპანია' },
            { id: 8, originalSentence: "გთხოვთ სწორად გამიგოთ.", paronym: "სწორად", correctParonym: "სწორად", incorrectParonym: "სწორედ", explanation: "მართებულად გაგება არის „სწორად“.", context: 'სწორად/სწორედ' },
            { id: 9, originalSentence: "დაისჯება დანაშაულის ჩამდენი თითოეული პიროვნება.", paronym: "პიროვნება", correctParonym: "პირი", incorrectParonym: "პიროვნება", explanation: "ოფიციალურ კონტექსტში გამოიყენება „პირი“.", context: 'პირი/პიროვნება' },
            { id: 10, originalSentence: "დიდ წვეულებას, ქორწილს და მისთ. კამპანიას უწოდებენ.", paronym: "კამპანიას", correctParonym: "კომპანიას", incorrectParonym: "კამპანიას", explanation: "მხიარულ საზოგადოებას ეწოდება „კომპანია“.", context: 'კამპანია/კომპანია' },
            { id: 11, originalSentence: "ყირიმის კამპანიის დროს ბევრი დაიღუპა.", paronym: "კამპანიის", correctParonym: "კამპანიის", incorrectParonym: "კომპანიის", explanation: "სამხედრო მოქმედებებს ეწოდება „კამპანია“.", context: 'კამპანია/კომპანია' },
            { id: 12, originalSentence: "ეს ფეხბურთელი ცხოვრებაში ძალზე ცუდი პიროვნება აღმოჩნდა.", paronym: "პიროვნება", correctParonym: "პიროვნება", incorrectParonym: "პირი", explanation: "ადამიანის ხასიათზე საუბრისას ვიყენებთ „პიროვნებას“.", context: 'პირი/პიროვნება' },
            { id: 13, originalSentence: "ეს წიგნი შეიცავს ძველ აღთქმასა და ახალ აღთქმას.", paronym: "აღთქმასა", correctParonym: "აღთქმასა", incorrectParonym: "აღქმასა", explanation: "საღვთო წერილის ნაწილს ჰქვია „აღთქმა“.", context: 'აღქმა/აღთქმა' },
            { id: 14, originalSentence: "ვატერლოოს კომპანია ერთ-ერთი უდიდესი სამხედრო ლაშქრობა იყო.", paronym: "კომპანია", correctParonym: "კამპანია", incorrectParonym: "კომპანია", explanation: "ისტორიულ ლაშქრობას ეწოდება „კამპანია“.", context: 'კამპანია/კომპანია' },
            { id: 15, originalSentence: "ვინ არის, რა კაცია შენი კომპანიონი ოფისში?", paronym: "კომპანიონი", correctParonym: "კომპანიონი", incorrectParonym: "კამპანიონი", explanation: "ბიზნეს პარტნიორი არის კომპანიონი.", context: 'კამპანია/კომპანია' },
            { id: 16, originalSentence: "ვინც ამ კითხვას სწორად უპასუხებს, საბოლოო გამარჯვებულიც ის იქნება.", paronym: "სწორად", correctParonym: "სწორად", incorrectParonym: "სწორედ", explanation: "უპასუხა როგორ? – სწორად.", context: 'სწორად/სწორედ' },
            { id: 17, originalSentence: "ინფორმაცია ძნელი აღსაქმელია.", paronym: "აღსაქმელია", correctParonym: "აღსაქმელია", incorrectParonym: "აღსათქმელია", explanation: "გაგება და გააზრება არის „აღქმა“.", context: 'აღქმა/აღთქმა' },
            { id: 18, originalSentence: "თქვენ მე სწორედ ვერ გამიგეთ.", paronym: "სწორედ", correctParonym: "სწორად", incorrectParonym: "სწორედ", explanation: "მართებულად გაგება არის „სწორად“.", context: 'სწორად/სწორედ' },
            { id: 19, originalSentence: "იოანე ბოლნელი X საუკუნის ცნობილი სასულიერო პიროვნება იყო.", paronym: "პიროვნება", correctParonym: "პირი", incorrectParonym: "პიროვნება", explanation: "სტატუსთან (სასულიერო) ვიყენებთ „პირს“.", context: 'პირი/პიროვნება' },
            { id: 20, originalSentence: "ლაბორატორიაში უცხო პირთა შესვლა სასტიკად აკრძალულია.", paronym: "პირთა", correctParonym: "პირთა", incorrectParonym: "პიროვნებათა", explanation: "ოფიციალურ განცხადებებში ვიყენებთ „პირს“.", context: 'პირი/პიროვნება' },
            { id: 21, originalSentence: "მე თუ სწორედ გავიგე, თქვენ ამ საქმეში მონაწილეობას არ მიიღებთ.", paronym: "სწორედ", correctParonym: "სწორად", incorrectParonym: "სწორედ", explanation: "მართებულად გაგება არის „სწორად“.", context: 'სწორად/სწორედ' },
            { id: 22, originalSentence: "მეომრებმა დაიჩოქეს და უფლის წინაშე აღთქმა დადეს.", paronym: "აღთქმა", correctParonym: "აღთქმა", incorrectParonym: "აღქმა", explanation: "პირობის მიცემა არის „აღთქმა“.", context: 'აღქმა/აღთქმა' },
            { id: 23, originalSentence: "მეოცნებე გოგონამ უაღრესად რომანტიკულად აღიქვა მოვლენები.", paronym: "აღიქვა", correctParonym: "აღიქვა", incorrectParonym: "აღითქვა", explanation: "მოვლენის გააზრება არის „აღქმა“.", context: 'აღქმა/აღთქმა' },
            { id: 24, originalSentence: "მუდამ უხერხულობას ვგრძნობ უტიფარი ადამიანების კამპანიაში.", paronym: "კამპანიაში", correctParonym: "კომპანიაში", incorrectParonym: "კამპანიაში", explanation: "ადამიანთა ჯგუფი არის „კომპანია“.", context: 'კამპანია/კომპანია' },
            { id: 25, originalSentence: "ნიჭიერმა სტუდენტმა ადვილად აღითქვა რთული ფილოსოფიური აზრები.", paronym: "აღითქვა", correctParonym: "აღიქვა", incorrectParonym: "აღითქვა", explanation: "აზრების გაგება არის „აღქმა“.", context: 'აღქმა/აღთქმა' },
            { id: 26, originalSentence: "საარჩევნო კამპანიის წარმატებას მთლიანად ძლიერი დაფინანსება განსაზღვრავს.", paronym: "კამპანიის", correctParonym: "კამპანიის", incorrectParonym: "კომპანიის", explanation: "საარჩევნო ღონისძიებები არის „კამპანია“.", context: 'კამპანია/კომპანია' },
            { id: 27, originalSentence: "საარჩევნო კომპანია გადამწყვეტ ფაზაში შედის.", paronym: "კომპანია", correctParonym: "კამპანია", incorrectParonym: "კომპანია", explanation: "საარჩევნო პროცესი არის „კამპანია“.", context: 'კამპანია/კომპანია' },
            { id: 28, originalSentence: "სამოქალაქო და სამხედრო პირები ხშირად ებრძვიან ერთმანეთს.", paronym: "პირები", correctParonym: "პირები", incorrectParonym: "პიროვნებები", explanation: "სტატუსთან ვიყენებთ „პირს“.", context: 'პირი/პიროვნება' },
            { id: 29, originalSentence: "სერვანტესის „დონ კიხოტის“ მთავარი პერსონაჟი ისტორიული პირი არ არის.", paronym: "პირი", correctParonym: "პირი", incorrectParonym: "პიროვნება", explanation: "ისტორიული ფიგურა არის „პირი“.", context: 'პირი/პიროვნება' },
            { id: 30, originalSentence: "სწორედ ამ ამბის შესატყობინებლად გირეკავდი გუშინ.", paronym: "სწორედ", correctParonym: "სწორედ", incorrectParonym: "სწორად", explanation: "ხაზგასმისთვის ვიყენებთ „სწორედ“-ს.", context: 'სწორად/სწორედ' },
            { id: 31, originalSentence: "ტექსტი აღსათქმელად ადვილია.", paronym: "აღსათქმელად", correctParonym: "აღსაქმელად", incorrectParonym: "აღსათქმელად", explanation: "ტექსტის გაგება არის „აღქმა“.", context: 'აღქმა/აღთქმა' },
            { id: 32, originalSentence: "ქუჩებს უნდა დაერქვას იმ პიროვნებათა სახელები.", paronym: "პიროვნებათა", correctParonym: "პირთა", incorrectParonym: "პიროვნებათა", explanation: "ოფიციალურ სტილში იხმარება „პირი“.", context: 'პირი/პიროვნება' },
            { id: 33, originalSentence: "ხორცი სწორად და თანაბრად გაჭრა.", paronym: "სწორად", correctParonym: "სწორად", incorrectParonym: "სწორედ", explanation: "მართებულად/თანაბრად გაჭრა არის „სწორად“.", context: 'სწორად/სწორედ' },
            { id: 34, originalSentence: "ახლა სწორედ შენზე ვლაპარაკობდით.", paronym: "სწორედ", correctParonym: "სწორედ", incorrectParonym: "სწორად", explanation: "ზუსტად შენზე – სწორია „სწორედ“.", context: 'სწორად/სწორედ' },
            { id: 35, originalSentence: "მოვლენას თითოეული ინდივიდი თავისებურად აღიქვამს.", paronym: "აღიქვამს", correctParonym: "აღიქვამს", incorrectParonym: "აღითქვამს", explanation: "მოვლენის გააზრება არის „აღქმა“.", context: 'აღქმა/აღთქმა' },
            { id: 36, originalSentence: "ვიპოვე სწორედ ისეთი ზომისა და ფერის ქოლგა.", paronym: "სწორედ", correctParonym: "სწორედ", incorrectParonym: "სწორად", explanation: "ზუსტად ისეთი – სწორია „სწორედ“.", context: 'სწორად/სწორედ' },
            { id: 37, originalSentence: "ღვთის წინაშე დავდოთ აღქმა.", paronym: "აღქმა", correctParonym: "აღთქმა", incorrectParonym: "აღქმა", explanation: "ფიცი არის „აღთქმა“.", context: 'აღქმა/აღთქმა' },
            { id: 38, originalSentence: "ხალხს რამდენიმე პირი გამოყო და სცენაზე ავიდა.", paronym: "პირი", correctParonym: "პირი", incorrectParonym: "პიროვნება", explanation: "რაოდენობასთან გამოიყენება „პირი“.", context: 'პირი/პიროვნება' },
            { id: 39, originalSentence: "ხუთი პიროვნება გავიდეს ოთახიდან.", paronym: "პიროვნება", correctParonym: "პირი", incorrectParonym: "პიროვნება", explanation: "რიცხვით სახელთან იხმარება „პირი“.", context: 'პირი/პიროვნება' },
        ];

        const shuffleArray = (array) => {
            const newArr = [...array];
            for (let i = newArr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArr[i], newArr[j]] = [newArr[j], newArr[i]];
            }
            return newArr;
        };

        const App = () => {
            const [state, setState] = useState({
                userName: '',
                userSurname: '',
                currentStep: 'welcome',
                currentIndex: 0,
                answers: [],
                exercises: [],
            });

            // Initialize exercises once
            useEffect(() => {
                setState(prev => ({ ...prev, exercises: shuffleArray(RAW_EXERCISES) }));
            }, []);

            // Generate shuffled options at the top level to avoid Hook violations
            const currentEx = state.exercises[state.currentIndex];
            const currentOptions = useMemo(() => {
                if (!currentEx) return [];
                return shuffleArray([currentEx.correctParonym, currentEx.incorrectParonym]);
            }, [currentEx?.id]);

            const handleStart = () => {
                if (state.userName.trim() && state.userSurname.trim()) {
                    setState(prev => ({ ...prev, currentStep: 'quiz' }));
                } else {
                    alert('გთხოვთ შეიყვანოთ სახელი და გვარი');
                }
            };

            const handleAnswer = (selectedText) => {
                const isCorrect = selectedText === currentEx.correctParonym;
                const newAnswer = { exerciseId: currentEx.id, selectedText, isCorrect };

                const nextIndex = state.currentIndex + 1;
                const isFinished = nextIndex >= state.exercises.length;

                setState(prev => ({
                    ...prev,
                    answers: [...prev.answers, newAnswer],
                    currentIndex: isFinished ? prev.currentIndex : nextIndex,
                    currentStep: isFinished ? 'report' : 'quiz',
                }));
            };

            if (state.currentStep === 'welcome') {
                return (
                    <div className="flex flex-col items-center justify-center min-h-screen px-4 fade-in">
                        <div className="bg-white p-10 rounded-3xl shadow-2xl max-w-md w-full border border-slate-100">
                            <h1 className="text-2xl font-bold text-slate-800 mb-6 text-center leading-tight">პარონიმები</h1>
                            <div className="space-y-4">
                                <input
                                    type="text" placeholder="სახელი"
                                    className="w-full p-4 bg-slate-50 border border-slate-200 rounded-xl outline-none focus:ring-2 focus:ring-blue-500"
                                    value={state.userName} onChange={e => setState(prev => ({ ...prev, userName: e.target.value }))}
                                />
                                <input
                                    type="text" placeholder="გვარი"
                                    className="w-full p-4 bg-slate-50 border border-slate-200 rounded-xl outline-none focus:ring-2 focus:ring-blue-500"
                                    value={state.userSurname} onChange={e => setState(prev => ({ ...prev, userSurname: e.target.value }))}
                                />
                                <button onClick={handleStart} className="w-full py-4 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl shadow-lg transition-all active:scale-95">დაწყება</button>
                            </div>
                        </div>
                    </div>
                );
            }

            if (state.currentStep === 'quiz') {
                if (!currentEx) return null;
                const parts = currentEx.originalSentence.split(currentEx.paronym);

                return (
                    <div className="max-w-3xl mx-auto px-4 py-12 fade-in">
                        <div className="mb-6 flex justify-between items-center bg-white p-5 rounded-2xl shadow-sm border border-slate-100">
                            <span className="text-sm font-bold text-blue-600">კითხვა {state.currentIndex + 1} / {state.exercises.length}</span>
                            <span className="text-sm text-slate-500 font-bold">{state.userName} {state.userSurname}</span>
                        </div>
                        <div className="bg-white p-10 rounded-3xl shadow-xl border border-slate-100 mb-8">
                            <p className="text-2xl leading-relaxed text-slate-800 mb-10 text-center italic">
                                "{parts[0]}<span className="text-blue-600 font-bold border-b-4 border-blue-100 px-1">{currentEx.paronym}</span>{parts[1]}"
                            </p>
                            <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                {currentOptions.map((option, idx) => (
                                    <button
                                        key={idx} onClick={() => handleAnswer(option)}
                                        className="p-6 text-xl font-bold bg-slate-50 border-2 border-slate-100 hover:border-blue-500 hover:bg-blue-50 text-slate-700 rounded-2xl transition-all shadow-sm transform hover:-translate-y-1"
                                    >
                                        {option}
                                    </button>
                                ))}
                            </div>
                        </div>
                        <div className="w-full bg-slate-200 h-3 rounded-full overflow-hidden">
                            <div className="bg-blue-600 h-full transition-all duration-500" style={{ width: `${((state.currentIndex + 1) / state.exercises.length) * 100}%` }}></div>
                        </div>
                    </div>
                );
            }

            const score = state.answers.filter(a => a.isCorrect).length;
            const percentage = Math.round((score / state.exercises.length) * 100);

            return (
                <div className="max-w-4xl mx-auto px-4 py-12 fade-in">
                    <div className="bg-white p-12 rounded-3xl shadow-2xl border border-slate-100 mb-10 text-center">
                        <h1 className="text-4xl font-black text-slate-800 mb-4">შედეგი: {percentage}%</h1>
                        <p className="text-xl text-slate-500 mb-8 font-bold">{state.userName} {state.userSurname}</p>
                        <div className="grid grid-cols-2 gap-4 max-w-xs mx-auto">
                            <div className="bg-green-50 p-6 rounded-2xl border border-green-100">
                                <div className="text-green-600 font-bold text-xs uppercase">სწორი</div>
                                <div className="text-4xl font-black text-green-700">{score}</div>
                            </div>
                            <div className="bg-red-50 p-6 rounded-2xl border border-red-100">
                                <div className="text-red-600 font-bold text-xs uppercase">შეცდომა</div>
                                <div className="text-4xl font-black text-red-700">{state.exercises.length - score}</div>
                            </div>
                        </div>
                    </div>

                    <div className="space-y-6">
                        {state.exercises.map((ex, idx) => {
                            const ans = state.answers.find(a => a.exerciseId === ex.id);
                            const parts = ex.originalSentence.split(ex.paronym);
                            return (
                                <div key={ex.id} className={`p-8 rounded-3xl bg-white shadow-lg border-l-8 ${ans?.isCorrect ? 'border-green-500' : 'border-red-500'}`}>
                                    <div className="flex items-center justify-between mb-4">
                                        <span className="font-black text-slate-300 text-2xl">#{idx + 1}</span>
                                        <span className={`px-4 py-1 rounded-full text-xs font-black uppercase ${ans?.isCorrect ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}`}>
                                            {ans?.isCorrect ? 'სწორია' : 'შეცდომა'}
                                        </span>
                                    </div>
                                    <p className="text-xl mb-6 text-slate-800 font-medium italic">
                                        "{parts[0]}<span className={ans?.isCorrect ? 'text-green-600 font-bold underline' : 'text-red-600 font-bold underline'}>{ex.paronym}</span>{parts[1]}"
                                    </p>
                                    <div className="bg-blue-50 p-6 rounded-2xl border border-blue-100 shadow-inner">
                                        <p className="text-blue-900 font-bold mb-2">განმარტება:</p>
                                        <p className="text-slate-700 leading-relaxed font-medium italic">{ex.explanation}</p>
                                        <div className="pt-4 mt-4 border-t border-blue-200">
                                            <p className="text-xs text-blue-900 font-bold">{PARONYM_THEORY[ex.context]}</p>
                                        </div>
                                    </div>
                                </div>
                            );
                        })}
                    </div>

                    <button onClick={() => window.location.reload()} className="mt-12 w-full py-6 bg-slate-800 hover:bg-black text-white font-black text-xl rounded-3xl shadow-2xl transition-all active:scale-95">თავიდან დაწყება</button>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
<script type="module" src="/index.tsx"></script>
</body>
</html>
